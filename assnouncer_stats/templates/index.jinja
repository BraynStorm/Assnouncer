{% extends 'base.jinja '%}
{% block content %}

<style>
    html,
    body {
        font-family: Consolas;
    }

    .card-container {
        display: flex;
        ;
        flex-flow: row wrap;
        max-width: 100vw;
        justify-content: center;
    }

    .card {
        max-width: 200px;
        max-height: 300px;
        border-radius: 10px;
        border: 1px solid rgb(182, 160, 160);
        margin: 5px;
        flex-direction: column;
        display: flex;
    }

    .count {
        text-align: right;

    }

    .spot {
        text-align: center;
    }

    .headline {
        text-align: center;
    }
</style>

<h2 class="headline">Today's top 10</h2>
<div class="card-container">
    {% for url, count in top_n_urls(records, 10, 'today') %}
    <div class="card">
        <span class="spot">#{{loop.index}}</span>
        <a href="{{url}}">
            <img src="https://img.youtube.com/vi/{{ video_id(url) }}/default.jpg">
        </a>
        <span class="count">{{count}} plays</span>
    </div>
    {% endfor%}
</div>

<hr>
<h2 class="headline">This month's top 10</h2>
<div class="card-container">
    {% for url, count in top_n_urls(records, 10, 'this_month') %}
    <div class="card">
        <span class="spot">#{{loop.index}}</span>
        <a href="{{url}}">
            <img src="https://img.youtube.com/vi/{{ video_id(url) }}/default.jpg">
        </a>
        <span class="count">{{count}} plays</span>
    </div>
    {% endfor%}
</div>

<hr>

{% for user in users %}
<h2 class="headline">{{user}}'s top 3 this month</h2>
<div class="card-container">
    {% for url, count in top_n_urls(records, 3, 'user_this_month', user) %}
    <div class="card">
        <span class="spot">#{{loop.index}}</span>
        <a href="{{url}}">
            <img src="https://img.youtube.com/vi/{{ video_id(url) }}/default.jpg">
        </a>
        <span class="count">{{count}} plays</span>
    </div>
    {% endfor%}
</div>
{% endfor %}

{% endblock %}